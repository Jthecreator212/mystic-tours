const fs = require("fs"); console.log("?? Fixing Tours Page to Show All Published Tours..."); const toursPagePath = "app/tours/page.tsx"; if (!fs.existsSync(toursPagePath)) { console.log("? File not found: " + toursPagePath); process.exit(1); } let content = fs.readFileSync(toursPagePath, "utf8"); if (content.includes(".eq(\"status\", \"published\")")) { console.log("? Tours page is already fixed!"); process.exit(0); } const oldQuery = `.select(\"id, title, short_description, image_url, price, duration, slug\") .order(\"created_at\", { ascending: true }) .limit(3);`; const newQuery = `.select(\"id, title, short_description, image_url, price, duration, slug, status\") .eq(\"status\", \"published\") .order(\"created_at\", { ascending: true });`; if (content.includes(oldQuery)) { content = content.replace(oldQuery, newQuery); fs.writeFileSync(toursPagePath, content, "utf8"); console.log("? Tours page fixed successfully!"); console.log("?? Changes made:"); console.log("   - Removed .limit(3) to show all tours"); console.log("   - Added .eq(\"status\", \"published\") to only show published tours"); console.log("   - Added status field to the select query"); console.log("?? Now your customer site will show all published tours!"); } else { console.log("? Could not find the query to replace"); console.log("Current query pattern not found"); }
